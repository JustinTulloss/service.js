define(['q'], function(Q) {
 return (function(t){"use strict";if(!Object.create)throw new Error("An Object.create polyfill is required to use Services");if("undefined"==typeof t)throw new Error("The Q promises library is required to use Services");var e={},r={},n=function(){},i={register:function(t,r){return e[t]?e[t].push(r):e[t]=[r],e[t].length},unregister:function(t,n){if(r[t])throw new Error("Cannot unregister a service that is starting or started");var i=e[t];if(n){for(var o=0;o<i.length;o++)i[o]===n&&i.splice(o,1);return i.length}return delete e[t],0},start:function(){for(var n=arguments.length?arguments:Object.keys(e),i=[],o=0;o<n.length;o++)(function(){function s(e){var n=Object.create(u[e]);n.onInitialize();var i=t(n.isUsable()),o=i.then(function(i){if(i){var o=n.onStart()||t(n);return o=o.then(function(){return n},function(t){throw delete r[a],t}),r[a]=o,o}if(e++,e<u.length)return s(e);throw delete r[a],new Error("No usable implementations of "+a)});return r[a]=o,o}var a=n[o],u=e[a].slice(0);if(r[a])throw new Error("Cannot start a service that's already started: "+a);i.push(s(0))}).call(this);return t.allSettled(i)},stop:function(){for(var e=arguments.length?arguments:Object.keys(r),n=[],i=0;i<e.length;i++)(function(t){r[t]&&n.push(r[t].done(function(e){e.onStop(),delete r[t]}))}).call(this,e[i]);return t.all(n)},ready:function(){for(var e=[],n=0;n<arguments.length;n++){var i=arguments[n];if(!r[i])throw new Error(i+" was not started or failed to start");e.push(r[i])}return t.all(e)},status:function(){var t,n,i=Object.keys(e),o={};for(t=0;t<i.length;t++)n=i[t],o[n]=e[n].length;var s={},a=Object.keys(r);for(t=0;t<a.length;t++)n=a[t],s[n]=r[n].inspect();return{registered:o,running:s}},Service:{onInitialize:n,onStart:n,onStop:n,isUsable:function(){return!0}}};return this.Services=i,i}).call(this,Q);
//# sourceMappingURL=service.map
});